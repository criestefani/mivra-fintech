
export const getSdkInstance = async (session: string): Promise<ClientSdk | null> => {
  const SSID = session

  if (SSID) {
    await fetch('https://api.trade.avalonbroker.com/v1/logout', {
      method: 'POST',
      mode: 'cors',
      credentials: 'include',
    }).catch(() => console.log('/v1/logout'))

    try {
      SDK_INSTANCE = await ClientSdk.create(
        'wss://ws.trade.avalonbroker.com/echo/websocket',
        parseInt(user_id, 10),
        new SsidAuthMethod(SSID)
      )
    } catch (error) {
      toastError('Error in the connection with the broker.')
    }
  }

  return SDK_INSTANCE
}
